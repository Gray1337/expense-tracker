{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useContext } from 'react';\nimport { ExpenseTrackerContext } from \"../context/context\";\nimport { incomeCategories, expenseCategories } from \"../constants/categories\";\n\nconst useTransaction = ({\n  title\n}) => {\n  _s();\n\n  // 讀取transactions的值\n  const {\n    transactions\n  } = useContext(ExpenseTrackerContext); // 區分title=收入/支出\n\n  const transactionPerType = transactions.filter(t => t.type === title); // 加總收入/支出的總額\n\n  const total = transactionPerType.reduce((acc, currVal) => acc += currVal.amount, 0); // 區分種類\n\n  const categories = title === '收入' ? incomeCategories : expenseCategories; // 把原始catergory的amount(0)加上新增的amount(n)\n\n  transactionPerType.forEach(t => {\n    const category = categories.find(c => c.type === t.category);\n\n    if (category) {\n      category.amount += t.amount;\n    }\n  }); // 過濾amount=0的種類\n\n  const filteredCategory = categories.filter(c => c.amount > 0);\n  console.log({\n    total,\n    transactionPerType,\n    categories\n  });\n  const chartData = {\n    datasets: [{\n      data: filteredCategory.map(c => c.amount),\n      backgroundColor: filteredCategory.map(c => c.color)\n    }],\n    labels: filteredCategory.map(c => c.type)\n  };\n  return {\n    total,\n    chartData\n  };\n};\n\n_s(useTransaction, \"Ni2LnfH2vyq3Bhy/VEUHhQfs92s=\");\n\nexport default useTransaction;","map":{"version":3,"sources":["C:/Users/Gray/Desktop/前端工程/expense-tracker-app/src/useTransactionAPI/useTransaction.js"],"names":["useContext","ExpenseTrackerContext","incomeCategories","expenseCategories","useTransaction","title","transactions","transactionPerType","filter","t","type","total","reduce","acc","currVal","amount","categories","forEach","category","find","c","filteredCategory","console","log","chartData","datasets","data","map","backgroundColor","color","labels"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,qBAAT,QAAsC,oBAAtC;AACA,SAASC,gBAAT,EAA2BC,iBAA3B,QAAoD,yBAApD;;AAEA,MAAMC,cAAc,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAY;AAAA;;AACjC;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAmBN,UAAU,CAACC,qBAAD,CAAnC,CAFiC,CAGjC;;AACA,QAAMM,kBAAkB,GAAGD,YAAY,CAACE,MAAb,CAAqBC,CAAD,IAAMA,CAAC,CAACC,IAAF,KAAWL,KAArC,CAA3B,CAJiC,CAKjC;;AACA,QAAMM,KAAK,GAAGJ,kBAAkB,CAACK,MAAnB,CAA0B,CAACC,GAAD,EAAKC,OAAL,KAAgBD,GAAG,IAAIC,OAAO,CAACC,MAAzD,EAAiE,CAAjE,CAAd,CANiC,CAOjC;;AACA,QAAMC,UAAU,GAAGX,KAAK,KAAK,IAAV,GAAiBH,gBAAjB,GAAoCC,iBAAvD,CARiC,CASjC;;AACAI,EAAAA,kBAAkB,CAACU,OAAnB,CAA2BR,CAAC,IAAI;AAC9B,UAAMS,QAAQ,GAAGF,UAAU,CAACG,IAAX,CAAgBC,CAAC,IAAEA,CAAC,CAACV,IAAF,KAAWD,CAAC,CAACS,QAAhC,CAAjB;;AACA,QAAGA,QAAH,EAAa;AAAEA,MAAAA,QAAQ,CAACH,MAAT,IAAmBN,CAAC,CAACM,MAArB;AAA6B;AAC7C,GAHD,EAViC,CAcjC;;AACA,QAAMM,gBAAgB,GAAGL,UAAU,CAACR,MAAX,CAAmBY,CAAC,IAAIA,CAAC,CAACL,MAAF,GAAW,CAAnC,CAAzB;AAEAO,EAAAA,OAAO,CAACC,GAAR,CAAY;AAACZ,IAAAA,KAAD;AAAOJ,IAAAA,kBAAP;AAA0BS,IAAAA;AAA1B,GAAZ;AAEA,QAAMQ,SAAS,GAAE;AACfC,IAAAA,QAAQ,EAAC,CAAC;AACRC,MAAAA,IAAI,EAACL,gBAAgB,CAACM,GAAjB,CAAqBP,CAAC,IAAIA,CAAC,CAACL,MAA5B,CADG;AAERa,MAAAA,eAAe,EAACP,gBAAgB,CAACM,GAAjB,CAAqBP,CAAC,IAAIA,CAAC,CAACS,KAA5B;AAFR,KAAD,CADM;AAKfC,IAAAA,MAAM,EAACT,gBAAgB,CAACM,GAAjB,CAAqBP,CAAC,IAAIA,CAAC,CAACV,IAA5B;AALQ,GAAjB;AAQA,SAAQ;AAACC,IAAAA,KAAD;AAAQa,IAAAA;AAAR,GAAR;AACD,CA5BD;;GAAMpB,c;;AA8BN,eAAeA,cAAf","sourcesContent":["import { useContext } from 'react';\r\nimport { ExpenseTrackerContext } from \"../context/context\";\r\nimport { incomeCategories, expenseCategories } from \"../constants/categories\";\r\n\r\nconst useTransaction = ({title}) =>{\r\n  // 讀取transactions的值\r\n  const { transactions } = useContext(ExpenseTrackerContext)\r\n  // 區分title=收入/支出\r\n  const transactionPerType = transactions.filter((t)=> t.type === title)\r\n  // 加總收入/支出的總額\r\n  const total = transactionPerType.reduce((acc,currVal)=> acc += currVal.amount ,0)\r\n  // 區分種類\r\n  const categories = title === '收入' ? incomeCategories : expenseCategories\r\n  // 把原始catergory的amount(0)加上新增的amount(n)\r\n  transactionPerType.forEach(t => {\r\n    const category = categories.find(c=>c.type === t.category)\r\n    if(category) { category.amount += t.amount }\r\n  });\r\n  // 過濾amount=0的種類\r\n  const filteredCategory = categories.filter( c => c.amount > 0 )\r\n\r\n  console.log({total,transactionPerType,categories})\r\n\r\n  const chartData ={\r\n    datasets:[{\r\n      data:filteredCategory.map(c => c.amount),\r\n      backgroundColor:filteredCategory.map(c => c.color)\r\n    }],\r\n    labels:filteredCategory.map(c => c.type)\r\n  }\r\n\r\n  return ({total, chartData})\r\n}\r\n\r\nexport default useTransaction"]},"metadata":{},"sourceType":"module"}